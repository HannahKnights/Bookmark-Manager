<h1>Welcome to bookmark manager</h1>

<div id="user_management">
<a href='/users/new'>Sign up</a>
<a href='/sessions/new'>Sign in</a>
</div>

<% if params[:text] != nil %>
  <%= partial :links_tagged %> 
<% else %>
  <%= partial :links_popular %>
<% end %>


Popular tags:
<ul>
  <% top_tags = LinkTag.aggregate(:tag_id, :all.count).sort_by{|tag_id, freq| freq}.reverse.take(10) %>
  <% top_tags.each do |tag_id, freq| %>

    <% tag = Tag.first(:id => tag_id)%>

    <li><%= tag.text %></li>
  
  <% end %>
</ul>

<% if current_user %>
  <div id="new_link">
    <form action="/bookmarks" method="post">
      
      <input type="text" name="url" placeholder="URL">

      <input type="text" name="title" placeholder="Title">

      <input type="text" name="description" placeholder="Description">

      <input type="text" name="tags" placeholder="Tags">

      <button type="submit">Add link</button>

    </form>
  </div>
<% end %>
